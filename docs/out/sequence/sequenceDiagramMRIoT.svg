<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2629px" preserveAspectRatio="none" style="width:1492px;height:2629px;background:#FFFFFF;" version="1.1" viewBox="0 0 1492 2629" width="1492px" zoomAndPan="magnify"><defs/><g><rect fill="#FFB6C1" height="2579.2578" style="stroke:#181818;stroke-width:0.5;" width="244" x="11" y="44.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="99.5" y="58.1045">RealWorld</text><rect fill="#90EE90" height="2557.9063" style="stroke:#181818;stroke-width:0.5;" width="196" x="59" y="65.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="123.5" y="79.4561">IoT Device</text><rect fill="#B0C4DE" height="2579.2578" style="stroke:#181818;stroke-width:0.5;" width="937" x="267" y="44.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59" x="706" y="58.1045">HoloLens</text><rect fill="#ADD8E6" height="2557.9063" style="stroke:#181818;stroke-width:0.5;" width="446.5" x="757.5" y="65.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="944.75" y="79.4561">DigitalTwin</text><rect fill="#87CEFA" height="2579.2578" style="stroke:#181818;stroke-width:0.5;" width="238" x="1216" y="44.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="1301.5" y="58.1045">MetaQuest</text><rect fill="#ADD8E6" height="2557.9063" style="stroke:#181818;stroke-width:0.5;" width="108" x="1346" y="65.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="1364" y="79.4561">DigitalTwin</text><rect fill="none" height="27.6094" id="_title" style="stroke:none;stroke-width:1.0;" width="214" x="637.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="204" x="642.5" y="29.5332">Sequence Diagram for MRIoT</text><rect fill="none" height="132.4063" style="stroke:#000000;stroke-width:1.5;" width="617" x="799" y="1513.1719"/><rect fill="none" height="197.1094" style="stroke:#000000;stroke-width:1.5;" width="1285.5" x="180.5" y="1962.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="32.5" x2="32.5" y1="163.9219" y2="2540.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="97.5" x2="97.5" y1="163.9219" y2="2540.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="196.5" x2="196.5" y1="163.9219" y2="2540.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="331" x2="331" y1="163.9219" y2="2540.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="467" x2="467" y1="163.9219" y2="2540.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="595" x2="595" y1="163.9219" y2="2540.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="683" x2="683" y1="163.9219" y2="2540.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="815" x2="815" y1="163.9219" y2="2540.2578"/><rect fill="#FFD700" height="1817.4141" style="stroke:#181818;stroke-width:1.0;" width="10" x="810" y="722.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1150" x2="1150" y1="163.9219" y2="2540.2578"/><rect fill="#FFD700" height="1787.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="1145" y="753.1953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1280" x2="1280" y1="163.9219" y2="2540.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1400" x2="1400" y1="163.9219" y2="2540.2578"/><rect fill="#FFD700" height="1756.7109" style="stroke:#181818;stroke-width:1.0;" width="10" x="1395" y="783.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="15" y="160.8457">User</text><ellipse cx="32.5" cy="94.8125" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M32.5,102.8125 L32.5,129.8125 M19.5,110.8125 L45.5,110.8125 M32.5,129.8125 L19.5,144.8125 M32.5,129.8125 L45.5,144.8125 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="63" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="70" y="152.8457">QRCode</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="142" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="149" y="152.8457">PhysicalDevice</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="271" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="278" y="152.8457">NetworkManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="401" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="408" y="152.8457">QRCodesManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="543" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="550" y="152.8457">ExactManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="657" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="664" y="152.8457">Game</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="761.5" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="768.5" y="152.8457">NetworkDevice</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1100" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1107" y="152.8457">NetworkThing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1220" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1227" y="152.8457">NetworkManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1350" y="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1357" y="152.8457">NetworkThing</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="15" y="2614.791">User</text><ellipse cx="32.5" cy="2548.7578" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M32.5,2556.7578 L32.5,2583.7578 M19.5,2564.7578 L45.5,2564.7578 M32.5,2583.7578 L19.5,2598.7578 M32.5,2583.7578 L45.5,2598.7578 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="63" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="70" y="2561.791">QRCode</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="142" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="149" y="2561.791">PhysicalDevice</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="271" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="278" y="2561.791">NetworkManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="401" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="408" y="2561.791">QRCodesManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="543" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="550" y="2561.791">ExactManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="657" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="664" y="2561.791">Game</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="761.5" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="768.5" y="2561.791">NetworkDevice</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1100" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1107" y="2561.791">NetworkThing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1220" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1227" y="2561.791">NetworkManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1350" y="2540.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1357" y="2561.791">NetworkThing</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1480" x="5" y="193.0977"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="193.0977" y2="193.0977"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="196.0977" y2="196.0977"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="64" x="713" y="181.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="46" x="719" y="199.417">Startup</text><rect fill="#FEFFDD" height="24" style="stroke:#181818;stroke-width:0.5;" width="1425" x="3.75" y="221.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="422" x="505.25" y="238.7686">Using liftime only for instances created after startup for a cleaner diagram</text><line style="stroke:#181818;stroke-width:1.0;" x1="331" x2="373" y1="272.9766" y2="272.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="373" x2="373" y1="272.9766" y2="285.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="373" y1="285.9766" y2="285.9766"/><polygon fill="#181818" points="342,281.9766,332,285.9766,342,289.9766,338,285.9766" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="338" y="268.1201">StartServer()</text><line style="stroke:#181818;stroke-width:1.0;" x1="1280" x2="1322" y1="316.3281" y2="316.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="1322" x2="1322" y1="316.3281" y2="329.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="1281" x2="1322" y1="329.3281" y2="329.3281"/><polygon fill="#181818" points="1291,325.3281,1281,329.3281,1291,333.3281,1287,329.3281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1287" y="311.4717">StartClient()</text><polygon fill="#181818" points="342,355.6797,332,359.6797,342,363.6797,338,359.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="1279" y1="359.6797" y2="359.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="348" y="354.8232">Connect()</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1480" x="5" y="488.8555"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="488.8555" y2="488.8555"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="491.8555" y2="491.8555"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="90" x="700" y="477.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="706" y="495.1748">Add Device</text><rect fill="#FEFFDD" height="57" style="stroke:#181818;stroke-width:0.5;" width="1425" x="3.75" y="517.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="526" x="453.25" y="534.5264">Using `&lt;&lt;QRCodeAdded&gt;&gt;` to show event triggered by OS when looking at a new QRCode</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="318" x="453.25" y="550.8779">Using `[NGO]` for Netcode for GameObjects-messages</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="453.25" y="567.2295">Using `[MQTT]` for MQTT messages (sent through ExactManager)</text><polygon fill="#181818" points="85.5,597.4375,95.5,601.4375,85.5,605.4375,89.5,601.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="32.5" x2="91.5" y1="601.4375" y2="601.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="39.5" y="596.5811">LookAt</text><polygon fill="#181818" points="455,627.7891,465,631.7891,455,635.7891,459,631.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="97.5" x2="461" y1="631.7891" y2="631.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="104.5" y="626.9326">&lt;&lt;QRCodeAdded&gt;&gt;</text><polygon fill="#181818" points="108.5,658.1406,98.5,662.1406,108.5,666.1406,104.5,662.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="102.5" x2="466" y1="662.1406" y2="662.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="114.5" y="657.2842">GetData</text><polygon fill="#181818" points="455,688.4922,465,692.4922,455,696.4922,459,692.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97.5" x2="461" y1="692.4922" y2="692.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="104.5" y="687.6357">data</text><polygon fill="#181818" points="798,718.8438,808,722.8438,798,726.8438,802,722.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="804" y1="722.8438" y2="722.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="474" y="717.9873">Instantiate()</text><polygon fill="#181818" points="1133,749.1953,1143,753.1953,1133,757.1953,1137,753.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="820" x2="1139" y1="753.1953" y2="753.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="827" y="748.3389">Spawn()</text><polygon fill="#181818" points="1383,779.5469,1393,783.5469,1383,787.5469,1387,783.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1155" x2="1389" y1="783.5469" y2="783.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="1162" y="778.6904">[NGO] Spawn()</text><polygon fill="#181818" points="606,809.8984,596,813.8984,606,817.8984,602,813.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="600" x2="809" y1="813.8984" y2="813.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="612" y="809.042">AddDevice(device)</text><polygon fill="#181818" points="207.5,840.25,197.5,844.25,207.5,848.25,203.5,844.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201.5" x2="594" y1="844.25" y2="844.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="213.5" y="839.3936">[MQTT] /.../are_you_connected</text><polygon fill="#181818" points="583,870.6016,593,874.6016,583,878.6016,587,874.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="196.5" x2="589" y1="874.6016" y2="874.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="203.5" y="869.7451">[MQTT] /.../connected/&lt;mac&gt;</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1480" x="5" y="1003.7773"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="1003.7773" y2="1003.7773"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="1006.7773" y2="1006.7773"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="99" x="695.5" y="992.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="701.5" y="1010.0967">Move Device</text><rect fill="#FEFFDD" height="24" style="stroke:#181818;stroke-width:0.5;" width="1425" x="3.75" y="1031.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="554.75" y="1049.4482">`Pose` is a Unity class containing Position and Rotation</text><polygon fill="#181818" points="85.5,1079.6563,95.5,1083.6563,85.5,1087.6563,89.5,1083.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="32.5" x2="91.5" y1="1083.6563" y2="1083.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="39.5" y="1078.7998">Move</text><polygon fill="#181818" points="108.5,1110.0078,98.5,1114.0078,108.5,1118.0078,104.5,1114.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="102.5" x2="809" y1="1114.0078" y2="1114.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="114.5" y="1109.1514">GetPose</text><polygon fill="#181818" points="798,1140.3594,808,1144.3594,798,1148.3594,802,1144.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97.5" x2="804" y1="1144.3594" y2="1144.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28" x="104.5" y="1139.5029">pose</text><polygon fill="#181818" points="1133,1170.7109,1143,1174.7109,1133,1178.7109,1137,1174.7109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="820" x2="1139" y1="1174.7109" y2="1174.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="827" y="1169.8545">SetPositionAndRotation(pose.position, pose.rotation)</text><polygon fill="#181818" points="1383,1201.0625,1393,1205.0625,1383,1209.0625,1387,1205.0625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1155" x2="1389" y1="1205.0625" y2="1205.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="1162" y="1200.2061">[NGO] NetworkTransform</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1480" x="5" y="1334.2383"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="1334.2383" y2="1334.2383"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="1337.2383" y2="1337.2383"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="99" x="695.5" y="1323.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="701.5" y="1340.5576">Physical Tap</text><polygon fill="#181818" points="184.5,1375.7656,194.5,1379.7656,184.5,1383.7656,188.5,1379.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="32.5" x2="190.5" y1="1379.7656" y2="1379.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="39.5" y="1374.9092">Tap</text><polygon fill="#181818" points="798,1406.1172,808,1410.1172,798,1414.1172,802,1410.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196.5" x2="804" y1="1410.1172" y2="1410.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="203.5" y="1405.2607">[MQTT] /.../&lt;mac&gt;/event/imu/tapped</text><polygon fill="#181818" points="694,1436.4688,684,1440.4688,694,1444.4688,690,1440.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688" x2="809" y1="1440.4688" y2="1440.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="700" y="1435.6123">OnTapped(device)</text><polygon fill="#181818" points="798,1466.8203,808,1470.8203,798,1474.8203,802,1470.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="683" x2="804" y1="1470.8203" y2="1470.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="690" y="1465.9639">SetColor(color)</text><polygon fill="#181818" points="207.5,1497.1719,197.5,1501.1719,207.5,1505.1719,203.5,1501.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201.5" x2="809" y1="1501.1719" y2="1501.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="375" x="213.5" y="1496.3154">[MQTT] /.../&lt;mac&gt;/action/led_ring/set_color_all_leds "255/0/255"</text><path d="M799,1513.1719 L950,1513.1719 L950,1521.5234 L940,1531.5234 L799,1531.5234 L799,1513.1719 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="132.4063" style="stroke:#000000;stroke-width:1.5;" width="617" x="799" y="1513.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106" x="814" y="1527.667">ref: Setting color</text><polygon fill="#181818" points="1133,1559.875,1143,1563.875,1133,1567.875,1137,1563.875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="820" x2="1139" y1="1563.875" y2="1563.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="827" y="1559.0186">SetUniformColor(color)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1155" x2="1197" y1="1594.2266" y2="1594.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="1197" x2="1197" y1="1594.2266" y2="1607.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="1156" x2="1197" y1="1607.2266" y2="1607.2266"/><polygon fill="#181818" points="1166,1603.2266,1156,1607.2266,1166,1611.2266,1162,1607.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="1162" y="1589.3701">_color = color</text><polygon fill="#181818" points="1383,1633.5781,1393,1637.5781,1383,1641.5781,1387,1637.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1155" x2="1389" y1="1637.5781" y2="1637.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="1162" y="1632.7217">[NGO] NetworkVariable(_color)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1480" x="5" y="1780.7539"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="1780.7539" y2="1780.7539"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="1783.7539" y2="1783.7539"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="171" x="659.5" y="1769.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="153" x="665.5" y="1787.0732">Virtual Tap on HoloLens</text><rect fill="#FEFFDD" height="40" style="stroke:#181818;stroke-width:0.5;" width="1425" x="3.75" y="1808.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="441" x="495.75" y="1826.4248">Using `&lt;&lt;Select&gt;&gt;` for the event when a user interacts with the virtual object</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395" x="495.75" y="1842.7764">Using `&lt;&lt;VirtualTapHappened&gt;&gt;` for the event fired by NetworkThing</text><polygon fill="#181818" points="1133,1872.9844,1143,1876.9844,1133,1880.9844,1137,1876.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="32.5" x2="1139" y1="1876.9844" y2="1876.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="39.5" y="1872.1279">&lt;&lt;Select&gt;&gt;</text><line style="stroke:#181818;stroke-width:1.0;" x1="1155" x2="1197" y1="1907.3359" y2="1907.3359"/><line style="stroke:#181818;stroke-width:1.0;" x1="1197" x2="1197" y1="1907.3359" y2="1920.3359"/><line style="stroke:#181818;stroke-width:1.0;" x1="1156" x2="1197" y1="1920.3359" y2="1920.3359"/><polygon fill="#181818" points="1166,1916.3359,1156,1920.3359,1166,1924.3359,1162,1920.3359" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="1162" y="1902.4795">VirtualTap()</text><polygon fill="#181818" points="831,1946.6875,821,1950.6875,831,1954.6875,827,1950.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="825" x2="1144" y1="1950.6875" y2="1950.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="837" y="1945.8311">&lt;&lt;VirtualTapHappened&gt;&gt;</text><path d="M180.5,1962.6875 L441.5,1962.6875 L441.5,1971.0391 L431.5,1981.0391 L180.5,1981.0391 L180.5,1962.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="197.1094" style="stroke:#000000;stroke-width:1.5;" width="1285.5" x="180.5" y="1962.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="216" x="195.5" y="1977.1826">ref: VirtualTapHappened handling</text><line style="stroke:#181818;stroke-width:1.0;" x1="820" x2="862" y1="2013.3906" y2="2013.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="862" x2="862" y1="2013.3906" y2="2026.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="821" x2="862" y1="2026.3906" y2="2026.3906"/><polygon fill="#181818" points="831,2022.3906,821,2026.3906,831,2030.3906,827,2026.3906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="827" y="2008.5342">OnTap()</text><polygon fill="#181818" points="694,2052.7422,684,2056.7422,694,2060.7422,690,2056.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688" x2="809" y1="2056.7422" y2="2056.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="700" y="2051.8857">OnTapped(device)</text><polygon fill="#181818" points="798,2083.0938,808,2087.0938,798,2091.0938,802,2087.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="683" x2="804" y1="2087.0938" y2="2087.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="690" y="2082.2373">SetColor(color)</text><polygon fill="#181818" points="207.5,2113.4453,197.5,2117.4453,207.5,2121.4453,203.5,2117.4453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201.5" x2="809" y1="2117.4453" y2="2117.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="347" x="213.5" y="2112.5889">[MQTT] /.../&lt;mac&gt;/action/led_ring/set_color_all_leds "0/0/0"</text><polygon fill="#DAA520" points="778.25,2130.4453,1436.25,2130.4453,1446.25,2142.4453,1436.25,2154.4453,778.25,2154.4453,768.25,2142.4453,778.25,2130.4453" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="981.5" y="2147.9404">Same as 'ref: Setting color' in 'Physical Tap'</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1480" x="5" y="2294.9727"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="2294.9727" y2="2294.9727"/><line style="stroke:#000000;stroke-width:1.0;" x1="5" x2="1485" y1="2297.9727" y2="2297.9727"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="183" x="653.5" y="2283.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="165" x="659.5" y="2301.292">Virtual Tap on Meta Quest</text><polygon fill="#181818" points="1383,2336.5,1393,2340.5,1383,2344.5,1387,2340.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="32.5" x2="1389" y1="2340.5" y2="2340.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="39.5" y="2335.6436">&lt;&lt;Select&gt;&gt;</text><line style="stroke:#181818;stroke-width:1.0;" x1="1405" x2="1447" y1="2370.8516" y2="2370.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="1447" x2="1447" y1="2370.8516" y2="2383.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="1406" x2="1447" y1="2383.8516" y2="2383.8516"/><polygon fill="#181818" points="1416,2379.8516,1406,2383.8516,1416,2387.8516,1412,2383.8516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="1412" y="2365.9951">VirtualTap()</text><polygon fill="#181818" points="1166,2410.2031,1156,2414.2031,1166,2418.2031,1162,2414.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1160" x2="1394" y1="2414.2031" y2="2414.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="1172" y="2409.3467">VirtualTapServerRpc()</text><line style="stroke:#181818;stroke-width:1.0;" x1="1155" x2="1197" y1="2444.5547" y2="2444.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="1197" x2="1197" y1="2444.5547" y2="2457.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="1156" x2="1197" y1="2457.5547" y2="2457.5547"/><polygon fill="#181818" points="1166,2453.5547,1156,2457.5547,1166,2461.5547,1162,2457.5547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="1162" y="2439.6982">VirtualTap()</text><polygon fill="#181818" points="831,2483.9063,821,2487.9063,831,2491.9063,827,2487.9063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="825" x2="1144" y1="2487.9063" y2="2487.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="837" y="2483.0498">&lt;&lt;VirtualTapHappened&gt;&gt;</text><polygon fill="#DAA520" points="159.25,2500.9063,1437.25,2500.9063,1447.25,2512.9063,1437.25,2524.9063,159.25,2524.9063,149.25,2512.9063,159.25,2500.9063" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="414" x="591.25" y="2518.4014">Same as 'ref: VirtualTapHappened handling' for 'Virtual Tap on HoloLens'</text><!--MD5=[dd87c59cf47fa53faad8f668c7d8449a]
@startuml sequenceDiagramMRIoT

title Sequence Diagram for MRIoT


!pragma teoz true
box "RealWorld" #LightPink
    actor User

    box "IoT Device" #LightGreen
        participant QRCode as QR
        participant PhysicalDevice as PD
    end box
end box

box "HoloLens" #LightSteelBlue
    participant NetworkManager as NMHL
    participant QRCodesManager as QRCM
    participant ExactManager as Exact
    participant Game
    box "DigitalTwin" #LightBlue
        participant NetworkDevice as ND
        participant NetworkThing as NTHL
    end box
end box

box "MetaQuest" #LightSkyBlue
    participant NetworkManager as NMMQ
    box "DigitalTwin" #LightBlue
        participant NetworkThing as NTMQ
    end box
end box

== Startup ==

rnote across
    Using liftime only for instances created after startup for a cleaner diagram
endnote

NMHL -> NMHL : StartServer()
NMMQ -> NMMQ : StartClient()
NMMQ -> NMHL : Connect()

||100||
== Add Device ==

rnote across
    Using `<<QRCodeAdded>>` to show event triggered by OS when looking at a new QRCode
    Using `[NGO]` for Netcode for GameObjects-messages
    Using `[MQTT]` for MQTT messages (sent through ExactManager)
endnote

User -> QR : LookAt
QR -> QRCM : <<QRCodeAdded>>
QRCM -> QR : GetData
QR - -> QRCM : data
QRCM -> ND ++ #Gold : Instantiate()
ND -> NTHL ++ #Gold : Spawn()
NTHL -> NTMQ ++ #Gold : [NGO] Spawn()
ND -> Exact : AddDevice(device)
Exact -> PD : [MQTT] /.../are_you_connected
PD - -> Exact : [MQTT] /.../connected/<mac>

||100||
== Move Device ==

rnote across
    `Pose` is a Unity class containing Position and Rotation
endnote

User -> QR : Move
ND -> QR : GetPose
QR - -> ND : pose
ND -> NTHL : SetPositionAndRotation(pose.position, pose.rotation)
NTHL -> NTMQ : [NGO] NetworkTransform

||100||
== Physical Tap ==

User -> PD : Tap
PD -> ND : [MQTT] /.../<mac>/event/imu/tapped
ND -> Game : OnTapped(device)
Game -> ND : SetColor(color)
ND -> PD : [MQTT] /.../<mac>/action/led_ring/set_color_all_leds "255/0/255"

'over ND, NTMQ
group ref: Setting color
    ND -> NTHL : SetUniformColor(color)
    NTHL -> NTHL : _color = color
    NTHL -> NTMQ : [NGO] NetworkVariable(_color)
end

||100||
== Virtual Tap on HoloLens ==

rnote across
    Using `<<Select>>` for the event when a user interacts with the virtual object
    Using `<<VirtualTapHappened>>` for the event fired by NetworkThing
endnote

User -> NTHL : <<Select>>
NTHL -> NTHL : VirtualTap()
NTHL -> ND : <<VirtualTapHappened>>

'over PD, NTMQ
group ref: VirtualTapHappened handling
    ND -> ND : OnTap()
    ND -> Game : OnTapped(device)
    Game -> ND : SetColor(color)
    ND -> PD : [MQTT] /.../<mac>/action/led_ring/set_color_all_leds "0/0/0"
    hnote over ND, NTMQ #GoldenRod
        Same as 'ref: Setting color' in 'Physical Tap'
    endnote
end

||100||
== Virtual Tap on Meta Quest ==

User -> NTMQ : <<Select>>
NTMQ -> NTMQ : VirtualTap()
NTMQ -> NTHL : VirtualTapServerRpc()
NTHL -> NTHL : VirtualTap()
NTHL -> ND : <<VirtualTapHappened>>

hnote over PD, NTMQ #GoldenRod
    Same as 'ref: VirtualTapHappened handling' for 'Virtual Tap on HoloLens'
endnote

@end

@startuml sequenceDiagramMRIoT

title Sequence Diagram for MRIoT


!pragma teoz true
box "RealWorld" #LightPink
    actor User

    box "IoT Device" #LightGreen
        participant QRCode as QR
        participant PhysicalDevice as PD
    end box
end box

box "HoloLens" #LightSteelBlue
    participant NetworkManager as NMHL
    participant QRCodesManager as QRCM
    participant ExactManager as Exact
    participant Game
    box "DigitalTwin" #LightBlue
        participant NetworkDevice as ND
        participant NetworkThing as NTHL
    end box
end box

box "MetaQuest" #LightSkyBlue
    participant NetworkManager as NMMQ
    box "DigitalTwin" #LightBlue
        participant NetworkThing as NTMQ
    end box
end box

== Startup ==

rnote across
    Using liftime only for instances created after startup for a cleaner diagram
endnote

NMHL -> NMHL : StartServer()
NMMQ -> NMMQ : StartClient()
NMMQ -> NMHL : Connect()

||100||
== Add Device ==

rnote across
    Using `<<QRCodeAdded>>` to show event triggered by OS when looking at a new QRCode
    Using `[NGO]` for Netcode for GameObjects-messages
    Using `[MQTT]` for MQTT messages (sent through ExactManager)
endnote

User -> QR : LookAt
QR -> QRCM : <<QRCodeAdded>>
QRCM -> QR : GetData
QR - -> QRCM : data
QRCM -> ND ++ #Gold : Instantiate()
ND -> NTHL ++ #Gold : Spawn()
NTHL -> NTMQ ++ #Gold : [NGO] Spawn()
ND -> Exact : AddDevice(device)
Exact -> PD : [MQTT] /.../are_you_connected
PD - -> Exact : [MQTT] /.../connected/<mac>

||100||
== Move Device ==

rnote across
    `Pose` is a Unity class containing Position and Rotation
endnote

User -> QR : Move
ND -> QR : GetPose
QR - -> ND : pose
ND -> NTHL : SetPositionAndRotation(pose.position, pose.rotation)
NTHL -> NTMQ : [NGO] NetworkTransform

||100||
== Physical Tap ==

User -> PD : Tap
PD -> ND : [MQTT] /.../<mac>/event/imu/tapped
ND -> Game : OnTapped(device)
Game -> ND : SetColor(color)
ND -> PD : [MQTT] /.../<mac>/action/led_ring/set_color_all_leds "255/0/255"

group ref: Setting color
    ND -> NTHL : SetUniformColor(color)
    NTHL -> NTHL : _color = color
    NTHL -> NTMQ : [NGO] NetworkVariable(_color)
end

||100||
== Virtual Tap on HoloLens ==

rnote across
    Using `<<Select>>` for the event when a user interacts with the virtual object
    Using `<<VirtualTapHappened>>` for the event fired by NetworkThing
endnote

User -> NTHL : <<Select>>
NTHL -> NTHL : VirtualTap()
NTHL -> ND : <<VirtualTapHappened>>

group ref: VirtualTapHappened handling
    ND -> ND : OnTap()
    ND -> Game : OnTapped(device)
    Game -> ND : SetColor(color)
    ND -> PD : [MQTT] /.../<mac>/action/led_ring/set_color_all_leds "0/0/0"
    hnote over ND, NTMQ #GoldenRod
        Same as 'ref: Setting color' in 'Physical Tap'
    endnote
end

||100||
== Virtual Tap on Meta Quest ==

User -> NTMQ : <<Select>>
NTMQ -> NTMQ : VirtualTap()
NTMQ -> NTHL : VirtualTapServerRpc()
NTHL -> NTHL : VirtualTap()
NTHL -> ND : <<VirtualTapHappened>>

hnote over PD, NTMQ #GoldenRod
    Same as 'ref: VirtualTapHappened handling' for 'Virtual Tap on HoloLens'
endnote

@end

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>